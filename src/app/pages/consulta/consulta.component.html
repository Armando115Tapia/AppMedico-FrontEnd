<mat-toolbar>Registro de consulta</mat-toolbar>

<div class="example-container"> 

  <mat-form-field>
    <!--La opcion de la seleccion de este combobox se almacenara en la variable idPacienteSeleccionado-->
    <mat-select placeholder="Paciente" [(value)] = "idPacienteSeleccionado">
      <!--La opcion es el id, pero se van a mostrar los nombres-->
      <mat-option *ngFor="let item of pacientes" [value] = "item.idPaciente" > 
        {{item.nombres}} {{ item.apellidos}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
      <!--La opcion de la seleccion de este combobox se almacenara en la variable idPacienteSeleccionado-->
      <mat-select placeholder="Especialidad" [(value)] = "idEspecialidadSeleccionado">
        <!--La opcion es el id, pero se van a mostrar los nombres-->
        <mat-option *ngFor="let es of especialidades" [value] = "es.idEspecialidad" > 
          {{es.nombre}} </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
        <!--La opcion de la seleccion de este combobox se almacenara en la variable idPacienteSeleccionado-->
        <mat-select placeholder="Medico" [(value)] = "idMedicoSeleccionado">
          <!--La opcion es el id, pero se van a mostrar los nombres-->
          <mat-option *ngFor="let m of medicos " [value] = "m.idMedico" > 
            {{m.nombres}} {{ m.apellidos}}</mat-option>
        </mat-select>
      </mat-form-field>


      <mat-form-field>
        <input matInput [matDatepicker]="picker" placeholder="Escoge una fecha" [max]="maxFecha" 
        [(ngModel)]="fechaSeleccionada" >
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <input matInput placeholder="Diagnostico" [(ngModel)]="diagnostico">
      </mat-form-field>
      
      <mat-form-field>
          <textarea matInput placeholder="Tratamiento" [(ngModel)]="tratamiento"></textarea>>
        </mat-form-field>

        <button mat-raised-button color="primary" (click)="agregar()">Agregar Detalle</button>

        <mat-list role="list" *ngFor="let d of detalleConsulta; let i=index">
            <mat-accordion>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{i+1}} {{d.diagonostico}}
                    </mat-panel-title>
                    <mat-panel-description>
                      Ver Tratamiento
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  
                  <mat-form-field>
                    <textarea matInput placeholder="Tratamiento" value="{{d.tratamiento}}"></textarea>
                  </mat-form-field>
                  <br>
                  <button mat-raised-button color="warn" (click)="removerDiagnostico(i)" >Remover</button>
                   </mat-expansion-panel>
              </mat-accordion>
              
          
          </mat-list>
          
          <mat-form-field>
            <!--La opcion de la seleccion de este combobox se almacenara en la variable idPacienteSeleccionado-->
            <mat-select placeholder="Examen" [(value)] = "idExamenSeleccionado">
              <!--La opcion es el id, pero se van a mostrar los nombres-->
              <mat-option *ngFor="let ex of examenes " [value] = "ex.idExamen" > 
                {{ex.nombre}} </mat-option>
            </mat-select>
          </mat-form-field>
      <button mat-raised-button color="primary" (click)="agregarExamen()">Agregar Examen</button>
      <mat-toolbar *ngFor="let d of examenesSeleccionados; let i = index">
        {{d.nombre}}
        <span class="example-spacer"></span>
        <button mat-raised-button color="warm" (click)="removerExamen(i)">Remover</button>

      </mat-toolbar>

      <button mat-raised-button color="primary" (click)="aceptar()"  [disabled]="estadoBotonRegistrar()">
        Registrar</button>


</div>